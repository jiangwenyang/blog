{
    "version": "https://jsonfeed.org/version/1",
    "title": "Jiang Wenyang's Blog",
    "home_page_url": "https://jiangwenyang.com",
    "feed_url": "https://jiangwenyang.com/json",
    "description": "Jiang Wenyang's Blog",
    "icon": "https://jiangwenyang.com/logo.svg",
    "author": {
        "name": "Jiang Wenyang",
        "url": "https://jiangwenyang.com"
    },
    "items": [
        {
            "id": "https://jiangwenyang.com/posts/ä¸€ä¸ªçœŸå®çš„vue-clié¡¹ç›®è¿ç§»åˆ°vite",
            "url": "https://jiangwenyang.com/posts/ä¸€ä¸ªçœŸå®çš„vue-clié¡¹ç›®è¿ç§»åˆ°vite",
            "title": "ä¸€ä¸ªçœŸå®çš„Vue CLIé¡¹ç›®è¿ç§»åˆ°vite",
            "summary": "\n## æ˜¯è°ï¼Ÿå«ä»€ä¹ˆï¼Ÿæ¥è‡ªå“ªé‡Œï¼Ÿè¦å»å¾€é‚£é‡Œï¼Ÿ\n\nå…ˆæ¥å›ç­”çµé­‚æ‹·é—®ã€‚æˆ‘ä»¬åŸæœ‰çš„é¡¹ç›®æ˜¯ä¸€ä¸ªä½¿ç”¨ Vue CLI ç”Ÿæˆçš„ vue2 é¡¹ç›®ï¼Œé¡¹ç›®æ•´ä½“ä¸Šæ˜¯æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜çš„ï¼Œä½†æ˜¯éšç€æ¨¡å—çš„ä¸æ–­å¢å¤šï¼ŒVue CLI åŸºäº Webpack æ„å»ºé€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œå¼€å‘ä½“éªŒä¸Šæ¯”è¾ƒå·®ï¼Œä¸ºäº†å‡å°‘æŠ“ç‹‚æ—¶é—´ï¼Œæˆ‘ä»¬å°†ç›®å…‰è½¬å‘äº†å·ç§°å¾ˆå¿«çš„ Viteã€‚\n\nåºŸè¯ä¸å¤šè¯´ï¼Œå…ˆæ¥çœ‹åŸæœ¬çš„é¡¹ç›®ç»“æ„ï¼š\n\n```\nâ”œâ”€â”€ .browserslistrc\nâ”œâ”€â”€ .editorconfig\nâ”œâ”€â”€ .env.development // ç¯å¢ƒå˜é‡ï¼Œä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶åŒ\nâ”œâ”€â”€ .env.development.local\nâ”œâ”€â”€ .env.pre\nâ”œâ”€â”€ .env.production\nâ”œâ”€â”€ .env.si\nâ”œâ”€â”€ .env.test\nâ”œâ”€â”€ .eslintignore\nâ”œâ”€â”€ .eslintrc.js\nâ”œâ”€â”€ .gitignore\nâ”œâ”€â”€ .npmrc\nâ”œâ”€â”€ .nvmrc\nâ”œâ”€â”€ .prettierignore\nâ”œâ”€â”€ .prettierrc.js\nâ”œâ”€â”€ .stylelintignore\nâ”œâ”€â”€ .stylelintrc.js\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ babel.config.js\nâ”œâ”€â”€ build/\nâ”œâ”€â”€ config/ ä¸€äº›é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œå¦‚ä»£ç†é…ç½®ç­‰\nâ”œâ”€â”€ dist/ æ„å»ºäº§ç‰©\nâ”œâ”€â”€ doc/ å¼€å‘æ–‡æ¡£\nâ”œâ”€â”€ jsconfig.json\nâ”œâ”€â”€ mock/\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ postcss.config.js\nâ”œâ”€â”€ public/\nâ”œâ”€â”€ src/ ä¸šåŠ¡ç›¸å…³\nâ”œâ”€â”€ tests/\nâ”œâ”€â”€ vue.config.js // Vue CLIé…ç½®\nâ””â”€â”€ yarn.lock\n```\n\n## å¥½å¥½çš„ä¸ºä»€ä¹ˆè¦è¿ç§»ï¼Ÿ\n\nè¿ç§»çš„ç›®çš„ä¸»è¦æ˜¯æ„å»ºé€Ÿåº¦ä¸Šçš„å·®åˆ«ï¼Œé™¤æ­¤ä¹‹å¤– Vite ä¹Ÿæœ‰ä¸€äº›å…¶ä»–çš„ä¼˜åŠ¿ã€‚\n\n- æ„å»ºé€Ÿåº¦\n\n  Vite ç›¸æ¯” Vue CLI æœ€æ˜¾è‘—çš„ä¼˜åŠ¿åº”è¯¥å°±æ˜¯æ„å»ºé€Ÿåº¦äº†ï¼ŒVite åŸºäº esbuild é¢„æ„å»ºä¾èµ–ï¼Œå› æ­¤ä¼šå¿«å¾ˆå¤šï¼Œå¼€å‘ä½“éªŒä¼šæ›´å¥½ã€‚\n\n  > Vite çš„å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒæ„å»ºç›®å‰æœ‰æ‰€åŒºåˆ«ï¼Œå¼€å‘ç¯å¢ƒå› ä¸ºç›´æ¥ä½¿ç”¨åŸç”Ÿ ESM ä¸éœ€è¦æ‰“åŒ…ï¼Œè€Œç”Ÿäº§ç¯å¢ƒæ‰“åŒ…é‡‡ç”¨äº† Rollup\n\n- éšè—æŠ€æœ¯ç»†èŠ‚\n\n  å‘ƒï¼Œè¿™ä¸€ç‚¹ï¼Œå…¶å® vite å’Œ Vue CLI æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚ã€‚ã€‚\n\n- æŠ˜è…¾ï¼Œå°è¯•æ–°çš„å·¥å…·\n\n  æ¯•ç«Ÿæ˜¯æ–°çš„å·¥å…·ï¼Œå°è¯•ä¸€ä¸‹ï¼Œå¹¶ä¸” Vue ç¤¾åŒºç›®å‰ä¹Ÿæ˜¯åœ¨æ¨åŠ¨çš„ã€‚\n\n## åƒé‡Œä¹‹è¡Œå§‹äºè¶³ä¸‹\n\nä¸‡äº‹å¼€å¤´éš¾ï¼Œæ—¢ç„¶è¿ç§»çš„ Flag å·²ç»ç«‹äº†ï¼Œåªèƒ½ç¡¬ç€å¤´çš®ä¸Šäº†ã€‚è®©æˆ‘ä»¬å…ˆç®€å•çœ‹ä¸€é Vite çš„å®˜æ–¹æ–‡æ¡£ï¼Œæ–‡æ¡£å»¶ç»­äº† Vue å®˜æ–¹æ–‡æ¡£ç®€æ´æ¸…æ™°çš„ä¼˜ç‚¹ï¼ŒåŸºæœ¬ä¸Šç®€å•çœ‹ä¸€éå°±å¯¹ Vite æ¯”è¾ƒäº†è§£äº†ï¼Œå…·ä½“ç»†èŠ‚ä¸æ¯”è¿‡åˆ†æ·±ç©¶ã€‚çœ‹å®Œæ–‡æ¡£å¾ˆå®¹æ˜“å‘ç°å’Œ Vue CLI çš„ä¸€äº›çº¦å®šä¸Šçš„åŒºåˆ«ï¼Œå¯¹äºè¿™éƒ¨åˆ†æ˜¯å¿…é¡»ä¿®æ”¹ä»£ç çš„ï¼Œä¸‹é¢å¼€å§‹è¿ç§»\n\n### é¦–å…ˆä¸¢æ‰å†å²åŒ…è¢±ï¼Œç§»é™¤ Vue CLI è½»è£…ä¸Šé˜µ\n\né¦–å…ˆï¼Œæˆ‘ä»¬å…ˆç§»é™¤æ‰€æœ‰å’Œ Vue CLI ç›¸å…³çš„ä¾èµ–ä»¥åŠé…ç½®\n\n- åœ¨ `package.json` çš„ä¾èµ–ä¸­æœç´¢ `vue-cli` å…³é”®è¯ï¼Œç„¶åç§»é™¤ç›¸å…³ä¾èµ–ã€‚\n\n- å°† script ä¸­çš„å¯åŠ¨è„šæœ¬æ”¹ä¸º Vite å¯¹åº”çš„å¯åŠ¨è„šæœ¬\n\n  å°†åŸæœ¬çš„å¯åŠ¨è„šæœ¬\n\n  ```json\n  {\n    \"scripts\": {\n      \"dev\": \"vue-cli-service serve --open\",\n      \"build\": \"vue-cli-service build --mode development\"\n    }\n  }\n  ```\n\n  æ”¹ä¸º\n\n  ```json\n  {\n    \"scripts\": {\n      \"dev\": \"vite\",\n      \"build\": \"vite build\",\n      \"serve\": \"vite preview\"\n    }\n  }\n  ```\n\n### ç„¶åå‰”ä¸ªç‰™ï¼Œåšäº›â€œå°æ”¹åŠ¨â€\n\næˆ‘ä»¬ä¸Šé¢è¯´åˆ° Vite å’Œ Vue CLI åœ¨éƒ¨åˆ†çº¦å®šä¸Šçš„ä¸åŒï¼Œéœ€è¦å¯¹ä»£ç åšä¸€äº›å°æ”¹åŠ¨\n\n#### å…¥å£ä¸åŒ\n\nVue CLI é»˜è®¤å…¥å£ä¸º`src/main.js`ï¼Œè€Œ Vite çš„é»˜è®¤å…¥å£åˆ™æ˜¯ index.html\n\nç›´æ¥å¼•ç”¨å®˜æ–¹æ–‡æ¡£ï¼š\n\n> Vite å°† `index.html` è§†ä¸ºæºç å’Œæ¨¡å—å›¾çš„ä¸€éƒ¨åˆ†ã€‚Vite è§£æ `<script type=\"module\" src=\"...\">` ï¼Œè¿™ä¸ªæ ‡ç­¾æŒ‡å‘ä½ çš„ JavaScript æºç ã€‚ç”šè‡³å†…è”å¼•å…¥ JavaScript çš„ `<script type=\"module\">` å’Œå¼•ç”¨ CSS çš„ `<link href>` ä¹Ÿèƒ½åˆ©ç”¨ Vite ç‰¹æœ‰çš„åŠŸèƒ½è¢«è§£æã€‚å¦å¤–ï¼Œ`index.html` ä¸­çš„ URL å°†è¢«è‡ªåŠ¨è½¬æ¢ï¼Œå› æ­¤ä¸å†éœ€è¦ `%PUBLIC_URL%` å ä½ç¬¦äº†ã€‚\n\nå› æ­¤æˆ‘ä»¬é¦–å…ˆéœ€è¦ä¿®æ”¹åŸæœ‰çš„å…¥å£\n\nå°† `public/index.html`\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta name=\"renderer\" content=\"webkit\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\"\n    />\n    <meta name=\"description\" content=\"\" />\n    <meta name=\"Keywords\" content=\"\" />\n    <link rel=\"icon\" href=\"<%= BASE_URL %>favicon.ico\" />\n    <title><%= webpackConfig.name %></title>\n  </head>\n  <body>\n    <noscript>\n      <strong>æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScriptï¼ï¼ï¼</strong>\n    </noscript>\n    <div id=\"app\"></div>\n    <!-- built files will be auto injected -->\n  </body>\n</html>\n```\n\nç§»åŠ¨åˆ°æ ¹ç›®å½•ä¸‹`index.html` ï¼Œå¹¶åšä¿®æ”¹\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n    <meta name=\"renderer\" content=\"webkit\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\"\n    />\n    <meta name=\"description\" content=\"\" />\n    <meta name=\"Keywords\" content=\"\" />\n    <link rel=\"icon\" href=\"./favicon.ico\" />\n    <title>XXX</title>\n  </head>\n  <body>\n    <noscript>\n      <strong>æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScriptï¼ï¼ï¼</strong>\n    </noscript>\n    <div id=\"app\"></div>\n    <!-- Viteå°†è‡ªåŠ¨è§£æä¸‹é¢çš„jsæ–‡ä»¶ -->\n    <script type=\"module\" src=\"/src/main.js\"></script>\n  </body>\n</html>\n```\n\n#### ç¯å¢ƒå˜é‡ä¸åŒ\n\nVue CLI çš„ç¯å¢ƒå˜é‡å’Œ Vite çš„ç¯å¢ƒå˜é‡åŠ è½½éƒ½æ˜¯é€šè¿‡ [dotenv](https://github.com/motdotla/dotenv) æ¥å®ç°çš„ï¼Œå› æ­¤åœ¨æ–‡ä»¶å‘½åçº¦å®šä¸Šæ˜¯ä¸€è‡´çš„ã€‚ä½†å…·æœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¸åŒï¼š\n\n- æš´éœ²æ–¹å¼\n\n  - Vue CLI ä¸­çº¦å®šåªæœ‰ `NODE_ENV`ã€`BASE_URL` å’Œä»¥`VUE_APP_` å¼€å¤´çš„å˜é‡è¢«æš´éœ²å‡ºæ¥ã€‚\n\n  - Vite ä¸­åˆ™çº¦å®šå¯ä»¥è®¿é—® `MODE` ï¼ˆåº”ç”¨è¿è¡Œçš„æ¨¡å¼ development|productionï¼‰ ã€`BASE_URL` ã€`PROD` ï¼ˆæ˜¯å¦è¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼‰ã€`DEV` ï¼ˆæ˜¯å¦è¿è¡Œåœ¨å¼€å‘ç¯å¢ƒï¼‰ä»¥åŠä»¥ `VITE_` å¼€å¤´çš„ç¯å¢ƒå˜é‡ã€‚\n\n- è®¿é—®æ–¹å¼\n\n  - Vue CLI é€šè¿‡`process.env` æ¥è®¿é—®\n\n  - Vite é€šè¿‡ `import.meta.env` æ¥è®¿é—®\n\nç”±äºä»¥ä¸Šçš„ä¸¤ç‚¹ä¸åŒï¼Œè¿ç§»æ—¶æˆ‘ä»¬å°±éœ€è¦ï¼š\n\n- å°†åŸæœ¬ä»¥ `VUE_APP_` å¼€å¤´çš„ç¯å¢ƒå˜é‡ç»Ÿä¸€æ›¿æ¢ä¸ºä»¥ `VITE_` å¼€å¤´ï¼›æˆ–è€…å¯é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ `vite.config.js` çš„ [envPrefix](https://cn.vitejs.dev/config/index.html#envprefix) è¿›è¡Œé…ç½®ï¼Œç›´æ¥é…ç½®ä¸º `VUE_APP_` åˆ™ä¸éœ€è¦å¯¹åŸæœ‰ç¯å¢ƒå˜é‡åç§°è¿›è¡Œä¿®æ”¹ã€‚(é…ç½®æ–‡ä»¶çš„åˆ›å»ºä¸‹é¢å°†ä¼šæåˆ°)\n- å°† `process.env` ç»Ÿä¸€æ›¿æ¢ä¸º `import.meta.env`ã€‚\n\n#### ä¸èƒ½å¿½ç•¥è‡ªå®šä¹‰å¯¼å…¥ç±»å‹æ‰©å±•åï¼ˆå¦‚`.vue`ï¼‰\n\nåœ¨ Vue CLI ä¸­ï¼Œé»˜è®¤æˆ‘ä»¬å¯ä»¥ä¸å†™`.vue`æ‰©å±•åè¿›è¡Œå¯¼å…¥\n\n```js\nimport App from \"./App\";\n```\n\nä½†æ˜¯åœ¨ Vite ä¸­ï¼Œ**ä¸å»ºè®®**ï¼ˆå®æµ‹è¿˜æ˜¯å¯ä»¥é…ç½®çš„ï¼‰å¿½ç•¥è‡ªå®šä¹‰æ‰©å±•åï¼Œå› ä¸ºä¼šå½±å“ IDE å’Œç±»å‹æ”¯æŒã€‚å› æ­¤éœ€è¦å®Œæ•´ä¹¦å†™\n\n```js\nimport App from \"./App.vue\";\n```\n\n> éè‡ªå®šä¹‰ç±»å‹çš„æ‰©å±•åå¯ä»¥é€šè¿‡é…ç½®é¡¹ ` resolve.extensions` æ¥è¿›è¡Œé…ç½®ï¼Œé»˜è®¤ä¸º `['.mjs', '.js', '.ts', '.jsx', '.tsx', '.json']`\n\n### å‡ºæ¥å§ä½ ï¼ŒVite\n\nåˆ°ç›®å‰ä¸ºæ­¢ï¼ŒåŸºæœ¬çš„ä¿®æ”¹ä»¥åŠå®Œæˆï¼Œæˆ‘ä»¬å¼€å§‹å¼•å…¥ Viteã€‚\n\nVite çš„å®‰è£…æ¯”è¾ƒç®€å•ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯å¯¹äºä¸åŒçš„ Vue ç‰ˆæœ¬ï¼Œéœ€è¦ç”¨åˆ°ä¸åŒçš„æ’ä»¶ã€‚\n\nå®‰è£… Vite\n\n```bash\n$ yarn add -D\n```\n\nå®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Vue æ’ä»¶\n\n> Vite ä¸º Vue æä¾›ç¬¬ä¸€ä¼˜å…ˆçº§æ”¯æŒï¼š\n>\n> - Vue 3 å•æ–‡ä»¶ç»„ä»¶æ”¯æŒï¼š[@vitejs/plugin-vue](https://github.com/vitejs/vite/tree/main/packages/plugin-vue)\n> - Vue 3 JSX æ”¯æŒï¼š[@vitejs/plugin-vue-jsx](https://github.com/vitejs/vite/tree/main/packages/plugin-vue-jsx)\n> - Vue 2 æ”¯æŒï¼š[underfin/vite-plugin-vue2](https://github.com/underfin/vite-plugin-vue2)\n\nç”±äºæˆ‘ä»¬ä½¿ç”¨ Vue2ï¼Œå› æ­¤å®‰è£… `vite-plugin-vue2`\n\n```bash\n$ yarn add -D vite-plugin-vue2\n```\n\nåœ¨æ ¹ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶ `vite.config.js`\n\n```json\nimport { defineConfig } from 'vite'\nconst { createVuePlugin } = require('vite-plugin-vue2')\n\n// https://vitejs.dev/config/\nexport default defineConfig(() => {\n  return {\n    base: './',\n    clearScreen: false,\n    plugins: [createVuePlugin()],\n    build: {\n      target: 'es2015',\n    },\n  }\n})\n```\n\n**å®Œç»“æ’’èŠ±ï¼ï¼ï¼**\n\nå¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰å…¶ä»–ç‰¹æ®Šçš„éœ€æ±‚çš„è¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åŸºæœ¬ä¸Šåº”è¯¥å¯ä»¥è·‘èµ·æ¥äº†ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å°±æ²¡è¿™ä¹ˆå¹¸è¿äº†ï¼Œæ—…é€”æ‰åˆšåˆšå¼€å§‹ã€‚ã€‚ã€‚\n\n## å¡«å‘ä¹‹æ—…\n\n### å¯ç”¨ JSX\n\nVite é»˜è®¤æ˜¯ä¸å¯ç”¨ JSX çš„ï¼Œå¦‚æœè¦å¼€å¯ JSX æ”¯æŒè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œéœ€è¦ï¼š\n\n1. å®ä¾‹åŒ– Vue2 æ’ä»¶çš„æ—¶å€™ä¼ å…¥`{jsx: true}` å¼€å¯ JSX æ”¯æŒã€‚\n\n   ```js\n   export default defineConfig(() => {\n     return {\n       plugins: [createVuePlugin({ jsx: true })], // å¼•å…¥Vue2æ’ä»¶å¹¶å¼€å¯JSXæ”¯æŒ\n     };\n   });\n   ```\n\n2. åœ¨ç”¨åˆ°çš„ç»„ä»¶ä¸ŠåŠ ä¸Š `jsx` æ ‡è¯†\n\n   ```js\n   <script lang=\"jsx\">\n       export default {\n           render(){\n               return <div>JSX Render</div>\n           }\n       }\n   </script>\n   ```\n\n3. å¦‚æœæ˜¯ js æ–‡ä»¶ï¼Œç”¨åˆ°äº† `jsx` è¯­æ³•ï¼Œåˆ™éœ€è¦å°†åç¼€åæ”¹å®Œ `.jsx` ã€‚\n\n### alias\n\nåœ¨åŸé¡¹ç›®ä¸­æˆ‘ä»¬åœ¨ `vue.config.js` ä¸­ å®šä¹‰äº†ä½¿ç”¨äº† Webpack çš„ `resolve.alias` ç‰¹æ€§ï¼š\n\n```js\n{\n\t\"configureWebpack\":{\n\t\tresolve: {\n      alias: {\n        '@': resolve('src'),\n        '@api': resolve('src/api'),\n        '@components': resolve('src/components'),\n        '@containers': resolve('src/containers'),\n        '@services': resolve('src/services'),\n        '@styles': resolve('src/styles'),\n        '@utils': resolve('src/utils'),\n\n        '@@containers': resolve(\n          'node_modules/web-lib/packages/web-lib-containers/lib'\n        ),\n        '@@components': resolve(\n          'node_modules/web-lib/packages/web-lib-components/lib'\n        ),\n        '@@services': resolve(\n          'node_modules/web-lib/packages/web-lib-services/lib'\n        ),\n        '@@utils': resolve('node_modules/web-lib/packages/web-lib-utils/lib'),\n        '@@styles': resolve('node_modules/web-lib/packages/web-lib-styles/lib'),\n      },\n    },\n\t}\n}\n```\n\næŸ¥çœ‹ Vite çš„é…ç½®æ–‡æ¡£ï¼Œå‘ç°å†…ç½®æ”¯æŒäº† aliasï¼Œè™½ç„¶æ˜¯é€šè¿‡ `@rollup/plugin-alias` æ¥å®ç°çš„ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯é…ç½®æ–¹å¼åŸºæœ¬æ˜¯ä¸€è‡´çš„ã€‚\n\nå› æ­¤åœ¨`vite.config.js` ä¸­è¿”å›çš„é…ç½®å¯¹è±¡ä¸­æ·»åŠ å¯¹åº”é…ç½® `resolve.alias` , ç›´æ¥å¤åˆ¶åŸæœ‰é…ç½®å¯¹è±¡å³å¯ã€‚\n\n```js\nresolve: {\n      alias: {\n        '@': resolve('src'),\n        '@api': resolve('src/api'),\n        '@components': resolve('src/components'),\n        '@containers': resolve('src/containers'),\n        '@services': resolve('src/services'),\n        '@styles': resolve('src/styles'),\n        '@utils': resolve('src/utils'),\n\n        '@@containers': resolve(\n          'node_modules/web-lib/packages/web-lib-containers/lib'\n        ),\n        '@@components': resolve(\n          'node_modules/web-lib/packages/web-lib-components/lib'\n        ),\n        '@@services': resolve(\n          'node_modules/web-lib/packages/web-lib-services/lib'\n        ),\n        '@@utils': resolve('node_modules/web-lib/packages/web-lib-utils/lib'),\n        '@@styles': resolve('node_modules/web-lib/packages/web-lib-styles/lib'),\n      },\n}\n```\n\n### å®¢æˆ·ç«¯ä»£ç ä¸­ä¸èƒ½ä½¿ç”¨ node å†…éƒ¨æ¨¡å—\n\nVite ä¸­ä¸å¯¹æ¨¡å—å…¼å®¹åšå¤„ç†ï¼Œå› æ­¤ä¸€äº› Node çš„å†…ç½®æ¨¡å—åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­å°†æ— æ³•æ‰¾åˆ°ã€‚å¦‚æœç¡®å®éœ€è¦ç”¨åˆ°ï¼Œåˆ™éœ€è¦æ›¿æ¢ä¸ºå¯¹åº”çš„æµè§ˆå™¨å…¼å®¹å®ç°ã€‚\n\nå¦‚ `path` æ¨¡å—å¯ä»¥æ¢æˆå¯¹åº”çš„æµè§ˆå™¨å…¼å®¹å®ç° `path-browserify` ã€‚\n\nåŸæœ‰ä»£ç ä½¿ç”¨ `path.join` æ¥æ‹¼æ¥è·¯å¾„ï¼š\n\n```js\nimport path from \"path\";\n\nexport function genPath(...paths) {\n  return path.join(...paths);\n}\n```\n\nåœ¨ Vite ä¸­åˆ™éœ€è¦ä¿®æ”¹ä¸ºå¯¹åº”æµè§ˆå™¨å…¼å®¹å®ç° `path-browserify`\n\né¦–å…ˆå®‰è£… `path-browserify`\n\n```bash\n$ yarn add path-browserify\n```\n\nç„¶åç›´æ¥æ›¿æ¢å¼•ç”¨å³å¯\n\n```js\nimport path from \"path-browserify\";\n\nexport function genPath(...paths) {\n  return path.join(...paths);\n}\n```\n\n### å…¨å±€ CSS å˜é‡\n\nåœ¨æˆ‘ä»¬åŸé¡¹ç›®ä¸­åœ¨`vue.config.js` ä¸­é…ç½®å¼•å…¥äº† [sass-resources-loader](https://github.com/shakacode/sass-resources-loader) æ¥å®ç°ã€‚\n\n```js\nchainWebpack(config) {\n\t// å¼•å…¥å…¨å±€çš„sassèµ„æº\n    const oneOfsMap = config.module.rule('scss').oneOfs.store\n    oneOfsMap.forEach(item => {\n      item\n        .use('sass-resources-loader')\n        .loader('sass-resources-loader')\n        .options({\n          resources: [\n            './node_modules/web-lib/packages/web-lib-styles/src/variables/index.scss',\n            './src/styles/variables.scss',\n          ],\n        })\n        .end()\n    })\n}\n```\n\nåœ¨ Vite ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ ` css.preprocessorOptions` è¿›è¡Œé…ç½®ã€‚\n\n```js\ncss: {\n      preprocessorOptions: {\n        scss: {\n          additionalData: `@import './node_modules/web-lib/packages/web-lib-styles/src/variables/index.scss';`,\n        },\n      },\n}\n```\n\nå¦‚æœä½ ç»†å¿ƒçš„è¯å¯èƒ½ä¼šå‘ç°ï¼Œæˆ‘ä»¬çš„åŸä»£ç ä¸­å¼•å…¥äº†ä¸¤ä¸ª CSS æ–‡ä»¶ã€‚è€Œè¿ç§»åçš„æˆ‘ä»¬åªå¼•å…¥äº†ä¸€ä¸ª CSS æ–‡ä»¶ã€‚åŸå› æ˜¯åœ¨ `./src/styles/variables.scss` ä¸­æˆ‘ä»¬ä½¿ç”¨äº†ä¸‹é¢çš„è¯­æ³•å¯¼å‡ºäº† js å˜é‡\n\n```scss\n// å¯¼å‡ºï¼Œä¾›jsæ¨¡å—è°ƒç”¨\n:export {\n  bg: $bg;\n  text_color: $text_color;\n  header_height: $header_height;\n  sidebar_width: $sidebar_width;\n  header_bg: $header_bg;\n  logo_bg: $logo_bg;\n  menu_bg: $menu_bg;\n  menu_text_color: $menu_text_color;\n  menu_active_text_color: $menu_active_text_color;\n  menu_hover: $menu_hover;\n}\n```\n\nåœ¨ Vite ä¸­ä¼šå‡ºç°ï¼Œå¦‚æœé…ç½®äº† `additionalData`ï¼Œå°†ä¼šæŠ¥é”™ï¼š\n\n```bash\nError: This file is already being loaded.\n    â•·\n  2 â”‚           @import './src/styles/variables.scss';\n    â”‚                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    â•µ\n    src/styles/variables.scss 2:19  root stylesheet\n```\n\nå¯å‚è€ƒä»¥ä¸‹ ISSUE:\n\n- https://github.com/vitejs/vite/issues/3283\n- https://github.com/nuxt/vite/issues/117\n\nç›®å‰æˆ‘ä»¬çš„è§£å†³æ–¹å¼å°±æ˜¯ä¸å¼•å…¥ï¼Œç„¶ååœ¨ç”¨åˆ°çš„åœ°æ–¹æ‰‹åŠ¨è¿›è¡Œå¼•å…¥è§„é¿è¿™ä¸ªé—®é¢˜ï¼Œæš‚æ—¶æ²¡æœ‰ç‰¹åˆ«å¥½çš„è§£å†³æ–¹æ¡ˆã€‚\n\n### åŠ¨æ€å¯¼å…¥ png ç­‰å›¾ç‰‡èµ„æº\n\nåœ¨ Vue CLI é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦é€šè¿‡è¿è¡Œæ—¶å˜é‡æ¥åŠ¨æ€ç¡®å®šä¸€äº›é™æ€èµ„æºæ¥è¿›è¡Œå¯¼å…¥\n\n```js\nconst iconSrc = require(`./images/${iconName}.png`);\n```\n\nä¸Šé¢çš„ä»£ç ä½¿ç”¨ webpack çš„ url-loader æˆ– url-loaderï¼Œå°†è¢«è‡ªåŠ¨å¤„ç†\n\nVite å¤„ç†å›¾ç‰‡èµ„æºçš„åŠ¨æ€å¼•å…¥ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š\n\n1. ä½¿ç”¨ `import.meta.globEager` glob å¼•å…¥\n\n   > è¿™ç§æ–¹å¼å°†ä¼šå…¨é‡çš„å¼•å…¥åŒ¹é…çš„å›¾ç‰‡\n\n   ```js\n   const images = import.meta.globEager(\"./images/*.png\"); // å°†ä¼šç›´æ¥å¯¼å…¥æ‰€æœ‰åŒ¹é…çš„å›¾ç‰‡\n   const iconSrc = iamges[`./images/${iconName}.png`].default;\n\n   if (iamges[`./images/${iconName}.png`]) {\n     // TODO\n   } else {\n     // TODO\n   }\n   ```\n\n2. ä½¿ç”¨ `new URL(url, import.meta.url)` å¼•å…¥\n\n   > è¿™ç§æ–¹å¼å¦‚æœå›¾ç‰‡ä¸å­˜åœ¨åœ¨ä»£ç å±‚é¢æ— æ³•åˆ¤æ–­\n\n   ```js\n   const iconSrc = new URL(`./images/${iconName}.png`, import.meta.url); // å°†è¿”å›ä¸€ä¸ªURLå®ä¾‹\n   ```\n\n### svg é›ªç¢§å›¾\n\nåœ¨åŸé¡¹ç›®ä¸­æˆ‘ä»¬ä½¿ç”¨äº† webpack çš„ [svg-sprite-loader](https://github.com/JetBrains/svg-sprite-loader) æ’ä»¶æ¥å®ç° svg é›ªç¢§å›¾ã€‚\n\n```js\nchainWebpack(config) {\n  // set svg-sprite-loader\n    config.module\n      .rule('svg')\n      .exclude.add(resolve('src/icons'))\n      .end()\n    config.module\n      .rule('icons')\n      .test(/\\.svg$/)\n      .include.add(resolve('src/icons'))\n      .end()\n      .use('svg-sprite-loader')\n      .loader('svg-sprite-loader')\n      .options({\n        symbolId: 'icon-[name]',\n      })\n      .end()\n}\n```\n\næ„Ÿè°¢ç¤¾åŒºï¼Œåœ¨ Vite ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ’ä»¶**[ vite-plugin-svg-icons ](https://github.com/anncwb/vite-plugin-svg-icons)** æ¥è¿›è¡Œæ›¿æ¢ä»¥å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚ä½¿ç”¨æ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥æŸ¥çœ‹ç›¸åº”æ–‡æ¡£ã€‚\n\n> æ³¨æ„: svg-sprite-loader éœ€è¦æ‰‹åŠ¨å¼•å…¥ svg æ–‡ä»¶ï¼Œè€Œ vite-plugin-svg-icons ä¼šè‡ªåŠ¨å¼•å…¥ã€‚\n\nåœ¨ Vite é…ç½®çš„ `plugins` é€‰é¡¹ä¸­å¼•å…¥æ’ä»¶\n\n```js\nimport viteSvgIcons from 'vite-plugin-svg-icons'\n\nexport default defineConfig(({ mode }) => {\n return {\n   viteSvgIcons({\n        iconDirs: [resolve('src/icons/svg')],\n        symbolId: 'icon-[name]',\n    }),\n \t}\n}\n```\n\nåœ¨ `main.js` ä¸­å¼•å…¥\n\n```js\nimport \"virtual:svg-icons-register\";\n```\n\n### Glob å¯¼å…¥\n\nåœ¨è€é¡¹ç›®ä¸­æˆ‘ä»¬å¦‚æœä½¿ç”¨äº† webpack çš„ `require.context` è¯­æ³•ï¼Œåœ¨ Vite ä¸­ä¼šæŠ¥é”™ã€‚å¯¹åº”çš„ï¼ŒVite æä¾›äº†`import.meta.glob` å’Œ `import.meta.globEager` æ¥ä»£æ›¿\n\nä¾‹å¦‚åŸæœ¬çš„`src/store/index.js` ä¸­åŠ¨æ€å¼•å…¥ modules\n\n```js\n// è·å–æ¨¡å—æ–‡ä»¶\nconst getModuleFiles = () => require.context(\"./modules\", true, /\\.js$/);\n// è·å–æ¨¡å—å¯¹è±¡è¡¨\nconst getModules = () => {\n  const storeFiles = getModuleFiles();\n\n  const modules = storeFiles.keys().reduce((modules, modulePath) => {\n    // set './app.js' => 'app'\n    const moduleName = modulePath.replace(/^\\.\\/(.*)\\.\\w+$/, \"$1\");\n    const value = storeFiles(modulePath);\n    modules[moduleName] = value.default;\n    return modules;\n  }, {});\n  return modules;\n};\n\nconst modules = getModules();\n```\n\nåœ¨ Vite ä¸­æ”¹ä¸º\n\n```js\nconst files = import.meta.globEager(\"./modules/*.js\");\n\nconst modules = Object.keys(files).reduce((pre, path) => {\n  pre[path.replace(/(\\.\\/modules\\/|\\.js)/g, \"\")] = files[path].default;\n  return pre;\n}, {});\n```\n\n### çƒ­æ›´æ–°\n\nåœ¨åŸæœ¬çš„`src/store/index.js` ä¸­æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å¯äº† store çš„çƒ­æ›´æ–°\n\n```js\n// å¯ç”¨æ¨¡å—çƒ­æ›´æ–°\nif (module.hot) {\n  const modulePaths = getModuleFiles().keys();\n  module.hot.accept([\"./getters\", ...[modulePaths]], () => {\n    // è·å–æ›´æ–°åçš„æ¨¡å—\n    const getters = require(\"./getters\").default;\n    const modules = getModules();\n    // åŠ è½½æ–°æ¨¡å—\n    store.hotUpdate({\n      getters,\n      modules,\n    });\n  });\n}\n```\n\nåœ¨ Vite ä¸­ç›´æ¥ç§»é™¤å³å¯ï¼Œä¸éœ€è¦é¢å¤–é…ç½®ã€‚\n\n### åœ¨ Vite é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡\n\nå¦‚æœæƒ³åœ¨ Vite é…ç½®ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨ `import.meta.env` æ¥è·å–çš„ï¼Œå› ä¸º Vite æ˜¯å…ˆè§£æé…ç½®æ–‡ä»¶å†è§£æç¯å¢ƒå˜é‡çš„ã€‚å› æ­¤åªèƒ½é€šè¿‡ [dotenv](https://github.com/motdotla/dotenv) æ¥æ‰‹åŠ¨è§£æè®¿é—®ã€‚\n\n```js\nexport default defineConfig(({ mode }) => {\n  // è®¿é—®é€šç”¨ç¯å¢ƒå˜é‡\n  const { PORT } = require(\"dotenv\").config({ path: `./.env` }).parsed || {};\n\n  // è®¿é—®åŸºäºè¿è¡Œç¯å¢ƒçš„ç¯å¢ƒå˜é‡\n  const {\n    VITE_APP_URI_BUSINESS_SERVICE_BASE,\n    VITE_APP_URI_FILE_SERVICE_BASE,\n    VITE_APP_USER_SOCTET_BASE,\n  } = require(\"dotenv\").config({ path: `./.env.${mode}` }).parsed || {};\n  return {\n    server: {\n      port: PORT,\n    },\n  };\n});\n```\n\n## å°ç”œå“ï¼Œæ¥ç‚¹å·¥ç¨‹åŒ–ä¼˜åŒ–\n\n### husky+lint-staged å®ç°æäº¤ lint\n\nhusky å¯ä»¥è®©æˆ‘ä»¬å®šä¹‰å„ç§ git-hooksï¼Œä»¥å®ç°åœ¨ git ç”Ÿå‘½å‘¨æœŸä¸­æ³¨å…¥å„ç§é’©å­æ¥å®šä¹‰æˆ‘ä»¬çš„å·¥ä½œæµï¼Œæ¯”å¦‚åšä»£ç æ ¡éªŒæˆ–è€…é‚®ä»¶é€šçŸ¥ç­‰ã€‚lint-staged åˆ™è®©æˆ‘ä»¬å¯ä»¥åªå¯¹å¾…æäº¤çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚ç»“åˆä¸¤è€…ä¾¿èƒ½å®ç°åœ¨æœŸæœ›çš„ git ç”Ÿå‘½å‘¨æœŸä¸­è§¦å‘å¯¹æ–°æäº¤ä»£ç è¿›è¡Œä¸€ç³»åˆ—æ“ä½œã€‚æœ€å¸¸è§çš„ä¾¿æ˜¯åœ¨ git çš„ commit ä¹‹å‰ï¼ˆ`pre-commit`ï¼‰ï¼Œå¯¹ä»£ç è¿›è¡Œæ ¡éªŒå’Œæ ¼å¼åŒ–ã€‚\n\n#### å®‰è£…åŠä½¿ç”¨\n\n1. å®‰è£… `husky`\n\n   ```bash\n   $ yarn add -D husky\n   ```\n\n2. å¼€å¯ Git hooks\n\n   ```bash\n   yarn husky install\n   ```\n\n3. æ·»åŠ å®‰è£…é¡¹ç›®ä¾èµ–åè‡ªåŠ¨å¼€å¯ Git hooks\n\n   `package.json`\n\n   ```bash\n   {\n     \"scripts\": {\n       \"prepare\": \"husky install\"\n     }\n   }\n   ```\n\n4. å®‰è£… lint-staged\n\n   ```bash\n   $ yarn add -D lint-staged\n   ```\n\n5. é…ç½® lint-staged\n\n   `package.json`\n\n   ```json\n   {\n     \"lint-staged\": {\n       \"**/*.{vue,js}\": [\"prettier --write\", \"eslint --fix\", \"git add\"],\n       \"**/*.{html,vue,css,scss}\": [\n         \"prettier --write\",\n         \"stylelint --allow-empty-input --fix\",\n         \"git add\"\n       ],\n       \"**/*.{md,json}\": [\"prettier --write\", \"git add\"]\n     }\n   }\n   ```\n\n6. é…ç½® hook åœ¨æäº¤æ—¶è§¦å‘ lint-staged\n\n   ```bash\n   $ npx husky add .husky/pre-commit \"npx lint-staged\"\n   ```\n\n7. å°† hook æ·»åŠ åˆ° git ä¸­\n\n   ```bash\n   $ git add .husky/pre-commit\n   ```\n\n#### git æ”¯æŒçš„é’©å­åŠç®€å•ä»‹ç»\n\n| é’©å­ç±»å‹           | é’©å­åç§°           | è§¦å‘æ—¶æœº                                                                                           | é’©å­å‚æ•°                  | å¯ä¸­æ­¢ |\n| ",
            "date_modified": "2021-09-22T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/TypeScriptç®€æ˜æŒ‡åŒ—",
            "url": "https://jiangwenyang.com/posts/TypeScriptç®€æ˜æŒ‡åŒ—",
            "title": "TypeScript Learning",
            "date_modified": "2019-10-23T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/CSSä¸­çš„ç©ºç™½ç¬¦å’Œæ¢è¡Œå¤„ç†",
            "url": "https://jiangwenyang.com/posts/CSSä¸­çš„ç©ºç™½ç¬¦å’Œæ¢è¡Œå¤„ç†",
            "title": "CSSä¸­çš„ç©ºç™½ç¬¦å’Œæ¢è¡Œå¤„ç†",
            "summary": "\n## CSS ä¸­çš„ç©ºç™½ç¬¦å’Œæ¢è¡Œå¤„ç†\n\nCSS ä¸­ä¸»è¦æœ‰ä¸‰ä¸ªå±æ€§ç”¨æ¥å¤„ç†ç©ºç™½ç¬¦å’Œæ¢è¡Œï¼š`white-space` `word-break` `word-wrap` ï¼Œé•¿å¾—æœ‰ç‚¹ç›¸ä¼¼ï¼Œåœ¨ä¸­æ–‡ç¯å¢ƒä¸‹ç”¨åˆ°çš„æœºä¼šä¸å¤ªå¤šï¼Œä½†æ˜¯æ¯æ¬¡ç”¨åˆ°éƒ½å‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Œä¸‹é¢æ•´ç†ä¸‹è¿™å‡ ä¸ªå±æ€§çš„åŒºåˆ«ã€‚\n\n### white-space\n\n`white-space` çœ‹åå­—å°±çŸ¥é“ä¸»è¦æ˜¯ç”¨æ¥å¤„ç†ç©ºç™½ç¬¦çš„ï¼Œä½†æ˜¯ä¹Ÿæ¶‰åŠåˆ°æ¢è¡Œçš„é—®é¢˜ã€‚\n\n`white-space` çš„æœ‰ä¸‹åˆ—çš„å€¼ï¼Œå¯¹åº”å…¶ä¸­çš„ç©ºç™½ç¬¦å’Œæ¢è¡Œç¬¦å¤„ç†æƒ…å†µï¼š\n\n| å±æ€§              | ç©ºç™½ç¬¦                 | æ¢è¡Œç¬¦             | è¶…å‡ºæ˜¯å¦è‡ªåŠ¨æ¢è¡Œ |\n| ",
            "date_modified": "2018-09-11T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•",
            "url": "https://jiangwenyang.com/posts/å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•",
            "title": "å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•",
            "date_modified": "2018-06-19T10:20:26.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/Stroybook",
            "url": "https://jiangwenyang.com/posts/Stroybook",
            "title": "Stroybook",
            "summary": "\n# Stroybook\n\n### ä»€ä¹ˆæ˜¯ Storybook?\n\nStroybook æ˜¯ä¸€ä¸ªå¯è§†åŒ–çš„ UI å¼€å‘ç¯å¢ƒï¼Œé€šè¿‡ Stroybook ä½ èƒ½å¿«é€Ÿçš„æ¸²æŸ“å±•ç¤º UI ç»„ä»¶ï¼Œå°† UI ç»„ä»¶ä¸é¡¹ç›®éš”ç¦»ï¼Œå¹¶ä¸”é€šè¿‡æä¾›çš„ä¸°å¯Œçš„æ’ä»¶æ¥æå‡å¼€å‘ä½“éªŒã€‚\n\n### ä½¿ç”¨ Strorybook\n\nStroybook ä¸ä»…ä»…å¯ä»¥åº”ç”¨äº React é¡¹ç›®ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ Vue å’Œ Angularï¼Œç”±äºç›®å‰é¡¹ç›®ä½¿ç”¨ Reactï¼Œå¹¶ä¸” Storybook å¯¹ React çš„æ”¯æŒåº¦æ›´å¥½ï¼Œå› æ­¤åœ¨æ­¤åªä»‹ç» Stroybook for Reactã€‚\n\n#### 1. å®‰è£…\n\nå®‰è£…é…ç½® Storybook å®˜æ–¹æä¾›äº†ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨æä¾›çš„ cli å·¥å…·è¿›è¡Œå¿«é€Ÿç”Ÿæˆï¼Œä¸€ç§æ˜¯æ‰‹åŠ¨å®‰è£…é…ç½®ã€‚æ¨èè‡ªå·±æ‰‹åŠ¨é…ç½®å®‰è£…ä»¥ç†Ÿæ‚‰ Storybookã€‚\n\n##### 1.1 å¿«é€Ÿç”Ÿæˆ\n\nStroybook å®˜æ–¹æä¾›äº†å¿«é€Ÿç”Ÿæˆ Stroybook é¡¹ç›®éª¨æ¶çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥åœ¨å·²æœ‰é¡¹ç›®ä¸‹ä½¿ç”¨ã€‚\nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š\n\n```bash\n$ npm i -g @storybook/cli\n$ getstorybook\n```\n\nä¸Šé¢çš„å‘½ä»¤å°†ä¼šä¸ºä½ å¿«é€Ÿç”Ÿæˆå¯¹åº”ä½ çš„é¡¹ç›®çš„ storybookã€‚å°†ä¼šå®‰è£…å¯¹åº”çš„ä¾èµ–ï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`.storybook`é…ç½®ç›®å½•å¹¶ç”Ÿæˆå¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œåˆ›å»º`stories`ç›®å½•å¹¶åˆ›å»ºé»˜è®¤çš„`stories`çš„ demo\n\n##### 1.2 è‡ªå®šä¹‰é…ç½®\n\nå¦‚æœä¸æƒ³å…¨å±€å®‰è£…å‘½ä»¤è¡Œå·¥å…·ï¼Œå¹¶ä¸”å¸Œæœ›è‡ªå®šä¹‰ Stroybookï¼Œæ¨èè‡ªå®šä¹‰å®‰è£…é…ç½® Stroybookã€‚\n\n1. å®‰è£…`@storybook/react`\n\n```bash\n$ yarn add -D @storybook/react\n```\n\n2. å®‰è£… reactï¼Œreact-domï¼Œbabel-core\n\n```bash\nyarn add react react-dom\nyarn add -D babel-core\n```\n\n> Storybook å®˜æ–¹æ²¡æœ‰ç»™å‡ºå…¼å®¹æ€§åˆ—è¡¨ï¼Œä½†å®æµ‹æ— æ³•ä½¿ç”¨ React 0.14\n\n3. æ·»åŠ  NPM script\n   ç¼–è¾‘`package.json`ï¼Œæ·»åŠ å¯åŠ¨ Storybook çš„ script å­—æ®µ\n\n```json\n{\n  \"scripts\": {\n    \"storybook\": \"start-storybook -p 9001 -c .storybook\"\n  }\n}\n```\n\n> `-c` å‚æ•°åè·Ÿé…ç½®æ–‡ä»¶æ‰€å¤„ç›®å½•ï¼Œä¸ä½¿ç”¨`-c`æ—¶å°†é»˜è®¤ä½¿ç”¨`.storybook`ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶`config.js`\n\n#### 2. é…ç½®\n\n> å¦‚æœä½¿ç”¨å¿«é€Ÿç”Ÿæˆåˆ™ä¸‹é¢è¿™äº›é…ç½®æ–‡ä»¶å·²ç»å¸®ä½ ç”Ÿæˆå¥½äº†æ— éœ€å†è‡ªå·±é…ç½®ã€‚\n\nåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`.storybook`æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹åˆ›å»º`config.js`æ–‡ä»¶ã€‚\næœ€ç®€å•çš„é…ç½®ï¼š\n\n```javascript\nimport { configure } from '@storybook/react';\n\nfunction loadStories() {\n  require('../stories/index.js');\n  // You can require as many stories as you need.\n}\n\nconfigure(loadStories, module);\n```\n\nä¸Šé¢çš„é…ç½®æ–‡ä»¶å°†ä¼šä½¿ç”¨`stories/index.js`ä¸­çš„ storiesï¼Œå¦‚æœä½ æœ‰å¤šä¸ª storiesï¼Œæ¯æ¬¡å†™ stories çš„æ—¶å€™éœ€è¦å¯¹åº”çš„è¿›è¡Œ requireï¼Œæ¯”è¾ƒç¹çã€‚å¦‚æœä½¿ç”¨ Webpackï¼Œå¯ä»¥ä½¿ç”¨ Webpack çš„[require.context](https://webpack.js.org/guides/dependency-management/)è¯­æ³•ï¼š\n\n```javascript\nimport { configure } from '@storybook/react';\n\nfunction loadStories() {\n  const storiesContext = require.context(\"../src\", true, /\\.stories\\.tsx$/);\n  storiesContext.keys().forEach(storiesContext);\n  // å°†ä¼šåŠ è½½srcæ‰€æœ‰å­ç›®å½•ä¸‹çš„ä»¥.stories.tsxç»“å°¾çš„æ¨¡å—\n  // You can require as many stories as you need.\n}\n\nconfigure(loadStories, module);\n```\n\n#### 3. å†™ stories\n\nåœ¨ç»„ä»¶ç›®å½•ä¸‹æ–°å»ºå¯¹åº” stories æ–‡ä»¶ï¼Œä¾‹å¦‚åœ¨ Button ç»„ä»¶ç›®å½•ä¸‹æ–°å»º`stories/Button.stories.tsx`\n\n```javascript\nimport React from 'react';\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\nimport Button from '../ui.desktop.tsx';\n\nstoriesOf('Button', module)\n  .add('with text', () => (\n    <Button onClick={action('clicked')}>Hello Button</Button>\n  ))\n  .add('with some emoji', () => (\n    <Button onClick={action('clicked')}>ğŸ˜€ ğŸ˜ ğŸ‘ ğŸ’¯</Button>\n  ));\n```\n\nç„¶åæ‰§è¡Œ`npm run storybook`æˆ–è€…`yarn storybook`æ‰“å¼€[localhost:9001](localhost:9001)å°†çœ‹åˆ°ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ç•Œé¢\n![](http://ow67vzejn.bkt.clouddn.com/18-1-31/1015387.jpg)\n\n#### 4. ä½¿ç”¨ addon\n\nStorybook é€šè¿‡æ’ä»¶çš„æ–¹å¼ä½¿ç”¨é¢å¤–çš„åŠŸèƒ½ï¼Œä¸»è¦æœ‰ä¸¤ç§æ’ä»¶ï¼š\n**Decorators ç±»è£…é¥°å™¨æ’ä»¶**\nDecorators æ’ä»¶åˆåˆ†ä¸ºä¸¤ç§:\n\n1. Wrapper Components\n   å°±æ˜¯æ™®é€šçš„ react å®¹å™¨ç»„ä»¶ï¼Œç®€å•çš„å°†ä½ éœ€è¦ story çš„ç»„ä»¶åŒ…è£¹åœ¨å…¶ä¸­ã€‚\n\n```javascript\nconst styles = {\n  textAlign: 'center',\n};\nconst Center = ({ children }) => (\n  <div style={styles}>\n    { children }\n  </div>\n);\n```\n\n2. Storybook Decorators\n   æ‰©å±•ä¸€ä¸ªå‡½æ•°ä½œä¸º storybook decoratorã€‚\n\n```javascript\nimport { storiesOf } from '@storybook/react';\nimport { action } from '@storybook/addon-actions';\n\nimport Button from './button';\n\nconst styles = {\n  textAlign: 'center',\n};\nconst CenterDecorator = (storyFn) => (\n  <div style={styles}>\n    { storyFn() }\n  </div>\n);\n\nstoriesOf('Button', module)\n  .addDecorator(CenterDecorator)\n  .add('with text', () => (\n    <Button onClick={action('clicked')}>Hello Button</Button>\n  ))\n  .add('with some emojies', () => (\n    <Button onClick={action('clicked')}>ğŸ˜€ ğŸ˜ ğŸ‘ ğŸ’¯</Button>\n  ));\n\n```\n\n> ä½¿ç”¨`.addDecorator(Decorator)`è¯­æ³•ä»£ç æ›´åŠ ç®€æ´,å¦‚æœè¦ä½¿ç”¨å…¨å±€çš„ Decorator å¯ä»¥åœ¨`config.js`ä¸­é…ç½®å…¨å±€çš„`Decorator`ï¼Œå°†ä¼šåº”ç”¨åˆ°æ‰€æœ‰çš„ stories\n\nä¾‹å¦‚éœ€è¦å±…ä¸­æ˜¾ç¤ºæ‰€æœ‰çš„ storiesï¼š\n\n```javascript\nimport * as React from 'react'\nimport { configure,addDecorator,setAddon } from '@storybook/react';\naddDecorator(stories=>(\n\t\t<div style={{textAlign: 'center'}}>\n\t\t    {stories()}\n\t\t</div>\n\t)\n)\n```\n\n**Native Addons åŸç”Ÿæ’ä»¶**\nåŸç”Ÿæ’ä»¶èƒ½åœ¨åŒ…è£¹ stories ä¹‹å‰æä¾›åŸºäº Storybook å¹³å°çš„é¢å¤–ç‰¹æ€§ï¼Œä¾‹å¦‚ storybook-actions æ’ä»¶ã€‚\n\nä½¿ç”¨è¿™ä¸¤ç§æ’ä»¶å‰ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å…ˆåœ¨`.storybook`ç›®å½•ä¸‹æ–°å»º`addons.js`æ¥æ³¨å†Œå¯¹åº”çš„æ’ä»¶\n\n```typescript\nimport \"@storybook/addon-actions/register\";\nimport \"@storybook/addon-links/register\";\nimport \"@storybook/addon-notes/register\";\n```\n\næ’ä»¶çš„å…·ä½“ä½¿ç”¨é…ç½®éœ€è¦æŸ¥çœ‹æ’ä»¶è‡ªå·±çš„æ–‡æ¡£ã€‚\n\n#### 5. è‡ªå®šä¹‰ Webpack é…ç½®\n\nå½“ä½¿ç”¨ storybook æ—¶ï¼ŒStorybook å°†ä¼šä½¿ç”¨è‡ªå·±é»˜è®¤çš„ webpack é…ç½®,ä½¿ç”¨çš„æ˜¯ create-react-app çš„ webpack é…ç½®ï¼Œä¸€èˆ¬è€Œè¨€é€‚ç”¨äºç»å¤§å¤šæ•°é¡¹ç›®ã€‚å¦‚æœæƒ³è‡ªå®šä¹‰ webpack æœ‰ä¸‹é¢å‡ ç§æ–¹å¼ï¼š\n**Extend Mode (æ‰©å±•æ¨¡å¼)**\nåœ¨`.storybook`ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶`webpack.config.js`ï¼Œå¯¼å‡ºä¸€ä¸ª**object**\n\n```javascript\nconst path = require('path');\n\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.scss$/,\n        loaders: [\"style-loader\", \"css-loader\", \"sass-loader\"],\n        include: path.resolve(__dirname, '../')\n      }\n    ]\n  }\n}\n```\n\næ‰©å±•æ¨¡å¼ä¸‹å¯ä»¥æ›´æ”¹é™¤ï¼š\n\n- entry\n- output\n- js loader with babel\n\nè¿™å‡ é¡¹å¤–æ‰€æœ‰çš„ webpack é…ç½®é¡¹ï¼ŒStorybook å°†ä¼šå°†ä½ çš„è‡ªå®šä¹‰é…ç½®é¡¹ä½œä¸ºé»˜è®¤é…ç½®çš„æ‰©å±•æ¥å¯åŠ¨ webpackã€‚\n\n**Full Control Mode (å®Œå…¨æ§åˆ¶æ¨¡å¼)**\né€šè¿‡å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° storybookBaseConfig å’Œ configTypeï¼Œä¸€ä¸ªæ˜¯ Storybook çš„åŸºç¡€é…ç½®å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯å½“å‰çš„ç¯å¢ƒï¼ˆ'DEVELOPMENT' or 'PRODUCTION'ï¼‰ï¼Œç„¶åé€šè¿‡ä¿®æ”¹ storybookBaseConfig åè¿”å›è‡ªå®šä¹‰çš„é…ç½®å¯¹è±¡è¾¾åˆ°å®Œå…¨æ§åˆ¶çš„ç›®çš„ã€‚\nå®˜æ–¹çš„ DMEOï¼š\n\n```javascript\nconst path = require('path');\n\n// Export a function. Accept the base config as the only param.\nmodule.exports = (storybookBaseConfig, configType) => {\n  // configType has a value of 'DEVELOPMENT' or 'PRODUCTION'\n  // You can change the configuration based on that.\n  // 'PRODUCTION' is used when building the static version of storybook.\n\n  // Make whatever fine-grained changes you need\n  storybookBaseConfig.module.rules.push({\n    test: /\\.scss$/,\n    loaders: [\"style-loader\", \"css-loader\", \"sass-loader\"],\n    include: path.resolve(__dirname, '../')\n  });\n\n  // Return the altered config\n  return storybookBaseConfig;\n};\n```\n\nå°½é‡ä¸è¦å»æ›´æ”¹ä¸‹é¢è¿™å‡ é¡¹ï¼š\n\n- entry\n- output\n- first loader in the module.loaders (Babel loader for JS)\n- all existing plugins\n\n**Full control mode + default ï¼ˆå®Œå…¨æ§åˆ¶+é»˜è®¤é…ç½® æ¨¡å¼ï¼‰**\nå’Œå®Œå…¨é…ç½®æ¨¡å¼å‡ ä¹ä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å¯¼å‡ºçš„å‡½æ•°å¤šäº†ä¸€ä¸ªå‚æ•° defaultConfigï¼Œå½“å¯¼å‡ºçš„å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°æ—¶å°†ä¼šä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚\n\n```javascript\nconst path = require('path');\n\nmodule.exports = (baseConfig, env, defaultConfig) => {\n  // Extend defaultConfig as you need.\n\n  // For example, add typescript loader:\n  defaultConfig.module.rules.push({\n    test: /\\.(ts|tsx)$/,\n    include: path.resolve(__dirname, '../src'),\n    loader: require.resolve('ts-loader')\n  });\n  defaultConfig.resolve.extensions.push('.ts', '.tsx');\n\n  return defaultConfig;\n};\n```\n\n> å»ºè®®ä½¿ç”¨æ‰©å±•æ¨¡å¼ï¼Œé…ç½®æ¯”è¾ƒç®€å•ã€‚å¦‚æœéœ€è¦æ ¹æ®ä¸åŒçš„ç¯å¢ƒè¿›è¡Œä¸åŒçš„ç¼–è¯‘é…ç½®ï¼Œä½¿ç”¨å…¨æ§åˆ¶æ¨¡å¼é…ç½®ã€‚\n> Storybook çš„åŸºç¡€é…ç½®ä¸­åªåŒ…å«äº† babel-loader å’Œ md è§£æç”¨çš„ loaderï¼Œé»˜è®¤é…ç½®ä¸­é…ç½®äº†ä¾‹å¦‚ cssã€jsonã€å­—ä½“æ–‡ä»¶ã€åª’ä½“æ–‡ä»¶ç›¸å…³çš„ loaderï¼Œå¯ä»¥åœ¨ node_modules\\@storybook\\react\\src\\server\\config ä¸‹çœ‹åˆ°å¯¹åº”çš„ webpack é…ç½®æ–‡ä»¶ã€‚\n\n#### 6. æ³¨å…¥ script æˆ– css\n\nå¦‚æœä½ çš„ UI åº“ä¾èµ–å…¨å±€çš„ script æˆ–è€… cssï¼Œå¯ä»¥é€šè¿‡ Storybook æä¾›çš„æ³¨å…¥çš„æ–¹å¼ã€‚\n\n1. ç»„ä»¶é¢„è§ˆ iframe æ³¨å…¥\n   åœ¨`./stroybook`ç›®å½•ä¸‹æ–°å»º`preview-head.html`,é‡Œé¢çš„ srcipt æˆ– css æ ‡ç­¾å°†æ³¨å…¥åˆ°é¢„è§ˆåŒºåŸŸçš„ iframe ä¸­ï¼Œåœ¨ stries åŠ è½½å‰è¢«æ³¨å…¥ã€‚\n   ä¾‹å¦‚å¸Œæœ›æ¯ä¸ª UI ç»„ä»¶ä½¿ç”¨ reset.css\n   åœ¨`preview-head.html`ä¸­æ·»åŠ \n\n```javascript\n<style>\n*{\n\tmargin: 0;\n\tpadding: 0;\n}\n</style>\n```\n\n2. Stroybook å¹³å°æ³¨å…¥\n   åœ¨`./stroybook`ç›®å½•ä¸‹æ–°å»º`manager-head.html`,é‡Œé¢çš„ script æˆ– css æ ‡ç­¾å°†æ³¨å…¥åˆ° Stroybook å¹³å°ä¸‹ï¼Œå°†åœ¨ Stroybook React UI åŠ è½½å‰è¢«æ³¨å…¥ã€‚\n\n### é…ç½®å‚è€ƒ\n\n```javascript\nimport * as React from 'react'\nimport { configure,addDecorator,setAddon } from '@storybook/react';\n\n/* å¯¼å…¥storybookæ’ä»¶ */\nimport { setOptions } from '@storybook/addon-options';\nimport JSXAddon from 'storybook-addon-jsx';\nimport { withKnobs } from '@storybook/addon-knobs/react';\nimport { withDocs } from 'storybook-readme';\n\n/* é€šç”¨storybookåº•éƒ¨md */\nimport * as Doc_Footer from './Doc_Footer.md';\n\n/* è®¾ç½®Storybook UI */\nsetOptions({\n  name: 'AnyShare',\n  url: 'https://anyshare.eisoo.com',\n  goFullScreen: false,\n  showLeftPanel: true,\n  showDownPanel: true,\n  showSearchBox: false,\n  downPanelInRight: true,\n});\n\n/* è®¾ç½®ä½¿ç”¨JSXAddonï¼Œåœ¨ä¾§è¾¹æ æ˜¾ç¤ºæ¸²æŸ“åŒºåŸŸç»„ä»¶å¯¹åº”çš„JSX */\nsetAddon(JSXAddon);\n\nwithDocs.addFooterDocs(Doc_Footer); // å½“ä½¿ç”¨withDocsæ—¶ï¼Œä½¿ç”¨é€šç”¨åº•éƒ¨md\n\n/* å…¨å±€storyè£…é¥°å™¨ */\naddDecorator(withKnobs) // ä½¿ç”¨addon-knobsè£…é¥°å™¨ï¼Œå…è®¸è‡ªå®šä¹‰ç»„ä»¶å‚æ•°ï¼Œå…·ä½“å‚æ•°éœ€è¦åœ¨storyä¸­å®šä¹‰\n\n\n/* åŠ è½½story */\nfunction loadStories() {\n  const storiesContext = require.context(\"../src\", true, /\\.stories\\.tsx$/);\n  storiesContext.keys().forEach(storiesContext);\n}\nconfigure(loadStories, module);\n```\n\nShareWebUI/.sotrybook/addon.js ",
            "date_modified": "2018-03-28T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/git-hook",
            "url": "https://jiangwenyang.com/posts/git-hook",
            "title": "Git-hook",
            "summary": "\n## Git-hook\n\nGit-hookï¼ˆgit é’©å­ï¼‰æ˜¯ Git æä¾›çš„å½“ç‰¹å®šåŠ¨ä½œå¦‚æäº¤ã€æ¨é€ç­‰ Git è¡Œä¸ºå‘ç”Ÿæ—¶æ‰§è¡Œçš„è‡ªå®šä¹‰è„šæœ¬ã€‚ä¸»è¦åˆ†ä¸ºå®¢æˆ·ç«¯è„šæœ¬å’ŒæœåŠ¡å™¨ç«¯è„šæœ¬ã€‚\n\n### Git-hook çš„å®‰è£…\n\nå…¶å®å½“åˆå§‹åŒ–ä¸€ä¸ª Git é¡¹ç›®çš„æ—¶å€™ï¼Œhooks å°±å·²ç»è¢«å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼Œåªæ˜¯é»˜è®¤æœªå¯ç”¨ã€‚å½“æ‰§è¡Œ`git init`çš„æ—¶å€™ï¼ŒGit ä¼šåˆå§‹åŒ–ç¤ºä¾‹è„šæœ¬åˆ°`.git/hooks`ç›®å½•ä¸­ã€‚\n\nå¦‚æœæƒ³å¯ç”¨è¿™äº› hooks éå¸¸ç®€å•ï¼Œåªéœ€è¦å»æ‰`.sample`åç¼€å³å¯å¯ç”¨ã€‚ç¤ºä¾‹ä»£ç æ˜¯ä½¿ç”¨ shell ç¼–å†™çš„,ä½†æ˜¯ git å¹¶æ²¡æ²¡æœ‰æ˜¾ç¤ºç¼–å†™ hooks ä½¿ç”¨çš„è¯­è¨€,ä»»ä½•å¯æ‰§è¡Œè„šæœ¬éƒ½å¯ä»¥ä½¿ç”¨ã€‚\n\n> `.git`ç›®å½•æ— æ³•åŠ å…¥åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œå› ä¸ºæ¯æ¬¡ clone ä¸€ä¸ªæ–°çš„ä»“åº“çš„æ—¶å€™éƒ½ä¼šæ–°ç”Ÿæˆ`.git`ç›®å½•ã€‚\n>\n> ç”±äºè¿™ä¸ªç‰¹æ€§ï¼Œå› æ­¤åªèƒ½å°† hooks å­˜å‚¨åˆ°å…¶ä»–ç›®å½•ï¼Œé€šè¿‡è½¯é“¾æ¥æˆ–è€…æ‰‹åŠ¨æ‹·è´çš„æ–¹å¼æ‹·è´åˆ°`.git/hooks`ç›®å½•ä¸‹ï¼Œä½†æ˜¯è¿™æ ·çš„é—®é¢˜æ˜¯å½“æ›´æ–°æˆ–æ–°å¢ hooks è„šæœ¬çš„æ—¶å€™éœ€è¦é‡æ–°å»ºç«‹ä¸`.git/hooks`çš„å…³ç³»ã€‚\n\n### å®¢æˆ·ç«¯é’©å­\n\nå®¢æˆ·ç«¯é’©å­ä¸»è¦æœ‰æäº¤å·¥ä½œæµé’©å­ã€ç”µå­é‚®ä»¶å·¥ä½œæµé’©å­å’Œå…¶å®ƒé’©å­ã€‚\n\n| é’©å­ç±»å‹           | é’©å­åç§°           | è§¦å‘æ—¶æœº                                                                                           | é’©å­å‚æ•°                  | å¯ä¸­æ­¢ |\n| ",
            "date_modified": "2018-03-12T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/Enzymeå®˜æ–¹APIä¸€è§ˆ",
            "url": "https://jiangwenyang.com/posts/Enzymeå®˜æ–¹APIä¸€è§ˆ",
            "title": "Enzymeå®˜æ–¹APIä¸€è§ˆ",
            "date_modified": "2017-12-27T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/Chai-expect APIä¸€è§ˆ",
            "url": "https://jiangwenyang.com/posts/Chai-expect APIä¸€è§ˆ",
            "title": "æ–­è¨€åº“Chai-expect-APIä¸€è§ˆ",
            "date_modified": "2017-12-20T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/Reactäº‹ä»¶ç»‘å®š",
            "url": "https://jiangwenyang.com/posts/Reactäº‹ä»¶ç»‘å®š",
            "title": "Reactäº‹ä»¶ç»‘å®š",
            "date_modified": "2017-12-20T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/Reacté«˜ä»·ç»„ä»¶ï¼ˆHOCï¼‰",
            "url": "https://jiangwenyang.com/posts/Reacté«˜ä»·ç»„ä»¶ï¼ˆHOCï¼‰",
            "title": "Reacté«˜ä»·ç»„ä»¶ï¼ˆHOCï¼‰",
            "date_modified": "2017-12-20T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/karma-karma-webpackå‰ç«¯å•å…ƒæµ‹è¯•",
            "url": "https://jiangwenyang.com/posts/karma-karma-webpackå‰ç«¯å•å…ƒæµ‹è¯•",
            "title": "karma+karma-webpackå‰ç«¯å•å…ƒæµ‹è¯•",
            "date_modified": "2017-12-20T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/Mongooseå®˜æ–¹APIä¸€è§ˆ",
            "url": "https://jiangwenyang.com/posts/Mongooseå®˜æ–¹APIä¸€è§ˆ",
            "title": "Mongooseå®˜æ–¹APIä¸€è§ˆ",
            "summary": "\n## ç®€å•èµ·æ­¥\n\n### ä¸€ã€å®‰è£…\n\nä½¿ç”¨ npm å®‰è£… mongooseï¼Œåœ¨è¿™ä¹‹å‰åº”è¯¥å®‰è£…é…ç½®å¥½ mongoDBï¼Œå…·ä½“å®‰è£…æ–¹æ³•å¯ä»¥å‚è€ƒ MongoDB å®˜æ–¹å®‰è£…æŒ‡å¯¼ã€‚\n\n```shell\nnpm install mongoose\n```\n\n### äºŒã€è¿æ¥æ•°æ®åº“\n\né¢„è¿æ¥ï¼ˆmongoose ç›‘å¬æ•°æ®åº“ç«¯å£ï¼Œå°è¯•è¿›è¡Œè¿æ¥ï¼‰åˆ°é»˜è®¤çš„*localhost*çš„*test*æ•°æ®åº“ã€‚\n\n```javascript\nvar mongoose = require(\"mongoose\");\nmongoose.connect(\"mongodb://localhost/test\"); //mongoDBçš„æ•°æ®åº“è¿æ¥éƒ½æ˜¯ä»¥mongodb://æ‰“å¤´ï¼Œåé¢è·Ÿæ•°æ®åº“è·¯å¾„\n```\n\n### ä¸‰ã€åˆ¤æ–­æ˜¯å¦æˆåŠŸè¿æ¥æ•°æ®åº“\n\nå‰é¢å·²ç»è¿›è¡Œæ•°æ®åº“çš„é¢„è¿æ¥ï¼Œåœ¨æ•°æ®åº“å¼€å¯æˆåŠŸï¼Œè¿æ¥è·¯å¾„æ²¡æœ‰é—®é¢˜çš„æƒ…å†µä¸‹ä¸€èˆ¬å°±èƒ½æ­£å¸¸è¿æ¥äº†ã€‚\n\n```javascript\nvar db = mongoose.connection;\ndb.on(error, console.error.bind(console, \"connection error:\"));\ndb.once(\"open\", function (callback) {\n  // è¿æ¥æˆåŠŸï¼Œåç»­æ•°æ®åº“æ“ä½œéƒ½åœ¨å›è°ƒä¸­è¿›è¡Œ\n});\n```\n\n### å››ã€å®šä¹‰æ¨¡å¼\n\næ¨¡å¼æ˜¯ mongoose çš„æ ¸å¿ƒï¼Œç›¸å½“äº SQL çš„æ•°æ®è¡¨ç»“æ„ï¼Œåœ¨è¿™é‡Œå®šä¹‰æ–‡æ¡£çš„é”®ä»¥åŠå¯¹åº”çš„å€¼çš„ç±»å‹ï¼Œä»¥åŠå®šä¹‰æ–‡æ¡£çš„å®ä¾‹æ–¹æ³•å’Œæ¨¡å‹çš„é™æ€æ–¹æ³•ã€‚\n\n```javascript\nvar Schema = mongoose.Schema;\nvar UserSchema = new Schema({\n  name: String,\n  age: Number,\n});\n```\n\nå€¼å¯¹åº”çš„ç±»å‹æ˜¯ SchemaTypeï¼Œå¯ç”¨çš„æœ‰ï¼š\n\n- String\n- Number\n- Date\n- Buffer\n- Boolean\n- Mixed\n- ObjectId\n- Array\n\n### äº”ã€å¯¼å‡ºæ¨¡å‹\n\nçœŸæ­£èƒ½å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œçš„æ˜¯æ¨¡å‹å’Œæ–‡æ¡£ï¼Œæ¨¡å‹æ˜¯æˆ‘ä»¬æ„å»ºæ–‡æ¡£çš„ç±»ï¼Œæ–‡æ¡£æ˜¯æ¨¡å‹çš„å®ä¾‹ï¼Œæ–‡æ¡£çš„é¢—ç²’åº¦æ¯”æ–‡æ¡£æ›´å°ã€‚\n\n```javascript\nvar Model = mongoose.model;\nvar user = new Model(\"user\", UserSchema);\n```\n\n### å…­ã€ç”Ÿæˆæ–‡æ¡£\n\næ–‡æ¡£ç›¸å½“äº SQL ä¸­çš„ä¸€è¡Œï¼Œæ˜¯çœŸæ­£å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚\n\n```javascript\nvar tom = new user({\n  name: \"tom\",\n  age: 20,\n});\n```\n\n### ä¸ƒã€å°†æ–‡æ¡£ä¿å­˜åˆ°æ•°æ®åº“\n\nåœ¨ä¸Šä¸€æ­¥æˆ‘ä»¬ä»ç„¶æ²¡æœ‰åœ¨æ•°æ®åº“ä¸­ä¿å­˜ä»»ä½•æ•°æ®ï¼Œåªæ˜¯ç”Ÿæˆäº†æ–‡æ¡£ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å­˜å…¥æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨æ–‡æ¡£ä¸Š*saveï¼ˆï¼‰*æ–¹æ³•å°†ç”Ÿæˆçš„æ–‡æ¡£å­˜å…¥æ•°æ®åº“ã€‚\n\n```javascript\ntom.save(function (err, tom) {\n  if (err) return console.error(err);\n  //è¿›è¡Œå…¶ä»–æ“ä½œ\n});\n```\n\n### å…«ã€æŸ¥è¯¢æ•°æ®åº“\n\næŸ¥è¯¢æ•°æ®åº“æ–‡æ¡£ï¼Œé€šè¿‡åœ¨*model*ä¸Šä½¿ç”¨*find*æ–¹æ³•ã€‚\n\n```javascript\nuser.find({ name: \"tom\" }, function (err, doc) {\n  console.log(doc);\n});\n```\n\n_å¦‚æœä¸ä¼ å…¥æŸ¥è¯¢æ¡ä»¶å°†ä¼šæŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£_\n\n",
            "date_modified": "2017-04-16T11:30:16.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/git-sshé…ç½®",
            "url": "https://jiangwenyang.com/posts/git-sshé…ç½®",
            "title": "windowsä¸‹git sshé…ç½®",
            "date_modified": "2016-05-30T18:58:33.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        },
        {
            "id": "https://jiangwenyang.com/posts/MongoDBå…¥é—¨",
            "url": "https://jiangwenyang.com/posts/MongoDBå…¥é—¨",
            "title": "MongoDBå…¥é—¨",
            "date_modified": "2016-05-13T00:00:00.000Z",
            "author": {
                "name": "Jiang Wenyang",
                "url": "https://jiangwenyang.com"
            }
        }
    ]
}